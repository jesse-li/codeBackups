function xAjax(t){if(this===window)return new xAjax(t);var t=t||{};this.type=t.type,this.data=t.data,this.url=t.url,this.success=t.success,this.fail=t.fail,this.dataType=t.dataType,this.cache=t.cache===!1?!1:!0,this.init()}function lazyLoad(t){var t=t||{};this.obj=t.obj,this.scope=t.scope||0,this.init()}function touchControl(t){t.eventsBind("touchstart",function(t){var e=t||window.event;startY=e.touches[0].clientY,e.stopPropagation()}),t.eventsBind("touchmove",function(t){var e=t||window.event,n=this;e.stopPropagation(),moveY=e.touches[0].clientY,startY-moveY>0&&n.scrollTop+n.offsetHeight>=n.scrollHeight-20&&e.preventDefault(),0>startY-moveY&&n.scrollTop<=20&&e.preventDefault()})}!function(){var t={index:0},e=function(t,e){var n;if("string"==typeof t||t!==window&&t!==document&&1!==t.nodeType&&!Array.isArray(t)){if(""===t.trim())n="";else if("string"==typeof t){var i=t.trim().substr(0,1);n="#"===i?document.getElementById(t.replace(/#/,"")):e===!0?document.querySelectorAll(t):document.querySelector(t)}}else n=Array.isArray(t)&&0===t.length?"":t;return e&&0===n.length||!n?[].push.apply(this):[].push.apply(this,n.length?n:[n])},n=function(t,n){return new e(t,n)};window.$=n,e.prototype.constructor=e,e.prototype.on=function(e,n,i){var o=this;if(!o||"function"!=typeof n)return!1;if(0===o.length&&o!=o.window)return!1;var s=function(t){var e=t||window.event,o=i.trim().substr(0,1),s=this,r=[];if(e.path)r=e.path;else for(var a=e.target;a!==window;)null===a?(r.push(window),a=window):(r.push(a),a=a.parentNode);if("."===o||"#"===o){if("."===o)for(var l=0,u=r.length;u>l;l+=1){if(r[l]===s)return!1;if(r[l].classList.contains(i.replace(".","")))return n.call(r[l],e),!1}if("#"===o)for(var l=0,u=r.length;u>l;l+=1){if(r[l]===s)return!1;if(r[l].id===i.replace("#",""))return n.call(r[l],e),!1}return!1}for(var l=0,u=r.length;u>l;l+=1){if(r[l]===s)return!1;if(r[l].tagName===i.toLocaleUpperCase())return n.call(r[l],e),!1}return!1};if(i)if(1===o.length){var r=o[0];if(r===window||r===document){if(void 0===t[r.bindcount]){t.index+=1;var a=t.index;r.bindcount=a,t[a]={}}!t[r.bindcount][e]&&(t[r.bindcount][e]=[]),t[r.bindcount][e].push(s);var l=t[r.bindcount][e].length;r.addEventListener(e,t[r.bindcount][e][l-1],!1)}else{if(void 0===t[r.dataset.bindcount]){t.index+=1;var a=t.index;r.dataset.bindcount=a,t[a]={}}!t[r.dataset.bindcount][e]&&(t[r.dataset.bindcount][e]=[]),t[r.dataset.bindcount][e].push(s);var l=t[r.dataset.bindcount][e].length;r.addEventListener(e,t[r.dataset.bindcount][e][l-1],!1)}}else[].forEach.call(o,function(n){if(void 0===t[n.dataset.bindcount]){t.index+=1;var i=t.index;n.dataset.bindcount=i,t[i]={}}!t[n.dataset.bindcount][e]&&(t[n.dataset.bindcount][e]=[]),t[n.dataset.bindcount][e].push(s);var o=t[n.dataset.bindcount][e].length;n.addEventListener(e,t[n.dataset.bindcount][e][o-1],!1)});else if(o.length&&1!==o.length)[].forEach.call(o,function(i){if(void 0===t[i.dataset.bindcount]){t.index+=1;var o=t.index;i.dataset.bindcount=o,t[o]={}}!t[i.dataset.bindcount][e]&&(t[i.dataset.bindcount][e]=[]),t[i.dataset.bindcount][e].push(n);var s=t[i.dataset.bindcount][e].length;i.addEventListener(e,t[i.dataset.bindcount][e][s-1],!1)});else{var r=o[0];if(r===window||r===document){if(void 0===t[r.bindcount]){t.index+=1;var a=t.index;r.bindcount=a,t[a]={}}!t[r.bindcount][e]&&(t[r.bindcount][e]=[]),t[r.bindcount][e].push(n);var l=t[r.bindcount][e].length;r.addEventListener(e,t[r.bindcount][e][l-1],!1)}else{if(void 0===t[r.dataset.bindcount]){t.index+=1;var a=t.index;r.dataset.bindcount=a,t[a]={}}!t[r.dataset.bindcount][e]&&(t[r.dataset.bindcount][e]=[]),t[r.dataset.bindcount][e].push(n);var l=t[r.dataset.bindcount][e].length;r.addEventListener(e,t[r.dataset.bindcount][e][l-1],!1)}}return o},e.prototype.off=function(e){var n=this;if(!n)return!1;if(0===n.length&&n!=n.window)return!1;if(n.length&&n.length>1)[].forEach.call(n,function(n){t[n.dataset.bindcount]&&(t[n.dataset.bindcount][e].length>1?t[n.dataset.bindcount][e].forEach(function(t){n.removeEventListener(e,t)}):n.removeEventListener(e,t[n.dataset.bindcount][e][0]))});else{var i=n[0];i===window||i===document?t[i.bindcount]&&(t[i.bindcount][e].length>1?t[i.bindcount][e].forEach(function(t){i.removeEventListener(e,t)}):i.removeEventListener(e,t[i.bindcount][e][0])):t[i.dataset.bindcount]&&(t[i.dataset.bindcount][e].length>1?t[i.dataset.bindcount][e].forEach(function(t){i.removeEventListener(e,t)}):i.removeEventListener(e,t[i.dataset.bindcount][e][0]))}return n[0]===window||n[0]===document?t[n[0].bindcount][e]=[]:n.length&&n.length>1?[].forEach.call(n,function(n){t[n.dataset.bindcount][e]=[]}):t[n[0].dataset.bindcount][e]=[],n},e.prototype.find=function(t){var n=this,i=[];if(""===t.trim())return n;if(n.length&&n.length>1)[].forEach.call(n,function(e){e.querySelectorAll(t).length>0&&(i=i.concat([].slice.call(e.querySelectorAll(t))))});else{var o=n[0];if("string"==typeof t){var s=t.trim().substr(0,1);"#"===s?i.push(o.getElementById(t.replace(/#/,""))):i=i.concat([].slice.call(o.querySelectorAll(t)))}}return new e(i)},e.prototype.children=function(t){var n=[],i=this[0];return"undefined"!=typeof t&&""!==t.trim()?"."===t.trim().substr(0,1)?[].forEach.call(i.childNodes,function(e){e.classList.contains(t.trim().substr(0,t.length))&&n.push(e)}):[].forEach.call(i.childNodes,function(e){e.tagName.toLocaleLowerCase()===t.toLocaleLowerCase()&&n.push(e)}):n=i.childNodes,new e(n)},e.prototype.siblings=function(t){var n=[],i=this[0],o=i;if("undefined"!=typeof t&&""!==t.trim())if("undefined"!=typeof o.nextElementSibling){for(;o.nextElementSibling;)("."===t.trim().substr(0,1)&&o.nextElementSibling.classList.contains(t.trim().substr(0,t.trim().length))||t.trim().toLocaleUpperCase()===o.nextElementSibling.tagName)&&n.push(o.nextElementSibling),o=o.nextElementSibling;for(o=i;o.previousElementSibling;)("."===t.trim().substr(0,1)&&o.previousElementSibling.classList.contains(t.trim().substr(0,t.trim().length))||t.trim().toLocaleUpperCase()===o.previousElementSibling.tagName)&&n.push(o.previousElementSibling),o=o.previousElementSibling}else{for(;o.nextSibling;)(1===o.nextSibling.nodeType&&"."===t.trim().substr(0,1)&&o.nextSibling.classList.contains(t.trim().substr(0,t.trim().length))||1===o.nextSibling.nodeType&&t.trim().toLocaleUpperCase()===o.nextSibling.tagName)&&n.push(o.nextSibling),o=o.nextSibling;for(o=i;o.previousSibling;)(1===o.previousSibling.nodeType&&"."===t.trim().substr(0,1)&&o.previousSibling.classList.contains(t.trim().substr(0,t.trim().length))||1===o.previousSibling.nodeType&&t.trim().toLocaleUpperCase()===o.previousSibling.tagName)&&n.push(o.previousSibling),o=o.previousSibling}else if("undefined"!=typeof o.nextElementSibling){for(;o.nextElementSibling;)n.push(o.nextElementSibling),o=o.nextElementSibling;for(o=i;o.previousElementSibling;)n.push(o.previousElementSibling),o=o.previousElementSibling}else{for(;o.nextSibling;)1===o.nextSibling.nodeType&&n.push(o.nextSibling),o=o.nextSibling;for(o=i;o.previousSibling;)1===o.previousSibling.nodeType&&n.push(o.previousSibling),o=o.previousSibling}return new e(n)},e.prototype.parent=function(){var t=this[0];return t.length?t:new e(t.parentNode)},e.prototype.parents=function(t){var n=this[0],i=[],o=n.parentNode;if(t){var s=t.substr(0,1);if("."===s||"#"===s){if("."===s)for(;o!==document;)o.classList.contains(t.replace(".",""))&&i.push(o),o=o.parentNode;if("#"===s)for(;o!==document;)o.id===t.replace("#","")&&i.push(o),o=o.parentNode}else for(;o!==document;)o.tagName.toLocaleLowerCase()===t&&i.push(o),o=o.parentNode}else for(;o!==document;)i.push(o),o=o.parentNode;return new e(i)},e.prototype.css=function(t,e){var n=this,i=Object.prototype.toString.call(t).split(" ")[1].replace("]",""),o=function(t){var e=t.indexOf("-"),t=t;return-1!==e?t=t.substr(0,e)+t.replace("-","").substr(e,1).toLocaleUpperCase()+t.substring(e+2,t.length):t};if("undefined"==typeof t||n===window||n===document)return n;if("undefined"==typeof e){if("String"===i)return getComputedStyle(n[0],null)[o(t)]}else"String"===i&&(n.length>1?[].forEach.call(n,function(n){n.style[o(t)]=e}):n[0].style[o(t)]=e);return n},e.prototype.index=function(){var t,e=this[0];return[].forEach.call(e.parentNode.children,function(n,i){e===n&&(t=i)}),void 0===t?-1:t},e.prototype.addClass=function(t){var e=this;return t&&null!==e&&0!==e.length?(e.length>1?[].forEach.call(e,function(e){e.classList.add(t)}):e[0].classList.add(t),e):e},e.prototype.removeClass=function(t){var e=this;return t&&null!==e&&0!==e.length?(e.length>1?[].forEach.call(e,function(e){e.classList.remove(t)}):e[0].classList.remove(t),e):e},e.prototype.html=function(t){return"undefined"==typeof t?this[0].innerHTML:void(this[0].innerHTML=t)},e.prototype.hasClass=function(t){var e=this;return t&&null!==e&&0!==e.length?e[0].classList.contains(t):!1},e.prototype.append=function(t){var e=this;if(1===e[0].nodeType)if(1===t.nodeType)e[0].appendChild(t);else{var n=document.createElement("div"),i=document.createDocumentFragment();n.innerHTML=t;for(var o=0,s=n.children.length;s>o;o+=1){var r=n.children[o].cloneNode(!0);i.appendChild(r)}e[0].appendChild(i)}return e},e.prototype.remove=function(){var t=this[0];t.remove?t.remove():t.parentNode.removeChild(t)},e.prototype.get=function(t){var e=this,t=t||0;return e[t]}}(),xAjax.prototype={init:function(){this.createXMLHttpRequest()},createXMLHttpRequest:function(){var t="",e=this;if(this.data)if("[object Object]"===Object.prototype.toString.call(this.data)){var n=Object.keys(this.data);Object.keys(this.data).length>0&&n.forEach(function(i,o){"[object Array]"===Object.prototype.toString.call(e.data[i])?e.data[i].forEach(function(e,s,r){t+=s+1>=r.length&&n.length<=o+1?i+"="+e:i+"="+e+"&"}):t+=n.length>o+1?i+"="+e.data[i]+"&":i+"="+e.data[i]})}else console.error("data not a Object");if(this.httpRequest=new XMLHttpRequest,!this.httpRequest)return alert("不支持XMLHttpRequert！"),!1;if(this.httpRequest.onreadystatechange=this.readystatechangeFn.bind(this),"post"===this.type.toLocaleLowerCase())this.httpRequest.open(this.type.toLowerCase(),this.url,!0),this.httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.httpRequest.send(t);else{var i=t?this.cache?this.url+"?"+t:this.url+"?"+t+"&_="+(new Date).getTime():this.cache?this.url:-1!==this.url.indexOf("?")?this.url+"&_="+(new Date).getTime():this.url+"?_="+(new Date).getTime();this.httpRequest.open(this.type.toLowerCase(),i,!0),this.httpRequest.send()}},readystatechangeFn:function(){this.httpRequest.readyState===XMLHttpRequest.DONE&&(200===this.httpRequest.status?"function"==typeof this.success&&this.success("json"===this.dataType?JSON.parse(this.httpRequest.responseText):this.httpRequest.responseText):"function"==typeof this.fail&&this.fail("json"===this.dataType?JSON.parse(this.httpRequest.responseText):this.httpRequest.responseText))}},lazyLoad.prototype={init:function(){this.loadTop=window.document.documentElement.clientHeight-this.scope,this.createLoadList(),this.loadImg(),this.scroll()},createLoadList:function(){var t=this;t.loadList=Array.prototype.map.call(t.obj,function(t){return t})},loadImg:function(){for(var t=this,e=0;e<t.loadList.length;e+=1)t.loadList[e].getBoundingClientRect().top<t.loadTop&&(t.loadList[e].src=t.loadList[e].dataset.src,t.loadList.splice(e,1),e--)},scroll:function(){var t=this,e=null;window.onscroll=function(){void 0===t.loadList,0===t.loadList.length?window.onscroll=null:(e&&clearTimeout(e),e=setTimeout(function(){t.loadImg()},300))}}};